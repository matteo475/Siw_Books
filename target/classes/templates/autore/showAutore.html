<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
	<title th:text="${autore.nome}">Dettaglio Autore</title>
	<link href="/css/dettaglioAutore.css" rel="stylesheet" type="text/css">

</head>

<body>
	<!--il div che segue è per la barra di navigazione in alto-->
	<div class="navbar" id="navbar">
		<div class="nav-links">
			<a href="/">Home</a>
			<a href="#prodotti">Libri</a>
			<a href="#categorie">Categorie</a>
			<a href="#contatti">Contatti</a>

			<!--rappresenta il menù a tendina -->
			<div class="dropdown">
				<a href="javascript:void(0)">Altro</a>
				<div class="dropdown-content">
					<a href="#link1">Link 1</a>
					<a href="#link2">Link 2</a>
					<a href="#link3">Link 3</a>
				</div>
			</div>
		</div>

		<!--barra di ricerca-->
		<div class="search-bar">
			<form th:action="@{/ricercaHome}" method="post" class="search-bar__form">
				<input type="text" th:value="${keyword}" placeholder="Cerca...">
				<button type="submit">Cerca</button>
			</form>
		</div>

		<div th:if="${userDetails}" class="auth-links" )>
			<span th:text="${userDetails.username}"></span>
			<a href="/logout">Logout</a>
		</div>

		<span class="menu-icon" onclick="toggleMenu()">&#9776;</span>
	</div>


	<div class="products">
		<h2 th:text="'Scheda Autore: ' + ${autore.nome} + ' ' + ${autore.cognome}" style="text-align: center;">Nome
			Autore</h2>

		<section id="scheda-libro" class="products">
			<div class="detail-container">

				<!-- colonna immagine -->
				<div class="carousel-vanilla">
					<div class="track">
						<div th:each="img : ${autore.immagini}" class="slide">
							<img th:src="@{/autore/immagine/{id}(id=${img.id})}" th:alt="'Img ' + ${img.id}" />
						</div>
					</div>
					<button class="prev">&lt;</button>
					<button class="next">&gt;</button>
				</div>

				<!-- colonna info -->
				<div class="book-info">
					<p><strong>Nome:</strong>
						<span th:text="${autore.nome}"></span>
					</p>
					<p><strong>Cognome:</strong>
						<span th:text="${autore.cognome}"></span>
					</p>
					<p><strong>Anno di Nascita:</strong>
						<span th:text="${autore.annoNascita}"></span>
					</p>
					<p><strong>Anno della Morte:</strong>
						<span th:text="${autore.annoMorte}"></span>
					</p>
					<p><strong>Nazionalita:</strong>
						<span th:text="${autore.nazionalita}"></span>
					</p>
					<p><strong>Biografia:</strong>
						<span th:text="${autore.biografia}"></span>
					</p>
				</div>
			</div>
		</section>

	</div>


	<script>
		document.querySelectorAll('.carousel-vanilla').forEach(carousel => {
			const track = carousel.querySelector('.track');
			const prevBtn = carousel.querySelector('.prev');
			const nextBtn = carousel.querySelector('.next');
			const intervalMs = 3000; // intervallo in ms

			// Handler prev/next
			prevBtn.onclick = () =>
				track.scrollBy({left: -track.offsetWidth, behavior: 'smooth'});
			nextBtn.onclick = () =>
				track.scrollBy({left: track.offsetWidth, behavior: 'smooth'});

			// Funzione di auto-scroll
			function startAutoScroll() {
				return setInterval(() => {
					const endReached = track.scrollLeft + track.offsetWidth >= track.scrollWidth;
					track.scrollTo({
						left: endReached ? 0 : track.scrollLeft + track.offsetWidth,
						behavior: 'smooth'
					});
				}, intervalMs);
			}

			let autoScroll = startAutoScroll();

			// Pausa e riprendi al passaggio del mouse
			carousel.addEventListener('mouseenter', () => clearInterval(autoScroll));
			carousel.addEventListener('mouseleave', () => autoScroll = startAutoScroll());
		});
	</script>

</body>

</html>